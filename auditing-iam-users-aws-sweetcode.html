<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auditing IAM Users in AWS - Wendy Segura</title>

  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1, h2, h3 {
      color: #222;
    }

    pre {
      background: #f4f4f4;
      padding: 10px;
      overflow-x: auto;
    }

    code {
      background: #f4f4f4;
      padding: 2px 4px;
      font-family: monospace;
    }

    img.heading-image,
    img.logo-image {
      width: 100%;
      height: auto;
      margin-bottom: 20px;
    }

    img.logo-image {
      width: 200px;
      display: block;
      margin: 0 auto 20px auto;
    }

    .original-publication {
      margin-top: 40px;
      padding: 15px;
      border-top: 2px solid #ddd;
      text-align: center;
      font-size: 0.9em;
      color: #555;
    }

    .original-publication a {
      color: #007bff;
      text-decoration: none;
    }

    .author-badge {
      text-align: center;
      margin-top: 30px;
    }

    .author-badge img {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
    }

    .author-badge p {
      margin: 0;
      font-size: 13px;
      color: #777;
    }
  </style>
</head>

<body>

<div class="container">

  <!-- Sweetcode Logo -->
  <img
    src="/images/Sweetcode-gray-shadow.png"
    alt="Sweetcode Logo"
    class="logo-image"
  >

  <!-- Heading Image (same style as truffleHog page) -->
  <img
    src="/images/auditing-iam-users-aws.png"
    alt="Auditing IAM Users in AWS"
    style="display:block; margin: 0; max-width:900px; height:auto;"
    class="heading-image"
  >

  <!-- Original Publication -->
  <div class="original-publication">
    <p>
      Original publication:
      <a href="#"
         target="_blank"
         rel="noopener noreferrer">
        View on Sweetcode (Archived)
      </a>
    </p>
  </div>

  <h1>Auditing IAM Users in AWS</h1>
  <p><strong>By: Wendy Segura</strong></p>
  <p><em>3 years ago 路 In Application Development 路 aws</em></p>

  <p>
    Checking your AWS account to see how many IAM (Identity and Access Management) users
    you have is a great and very simple way to get started with auditing.
  </p>

  <p>
    You will be able to check if these users are following security best practices, such
    as having Multi-Factor Authentication set up for their account, the last time they
    changed their password, and when they last rotated their access key.
  </p>

  <p>
    Let us suppose that everyone in the company had access to the AWS account. Even if
    their job description did not require any type of access, this would make the account
    vulnerable and create a less secure environment.
  </p>

  <p>
    Auditing IAM users and making sure that they need the access to perform their task is
    a start to not only practicing better security, but also enforcing IAM best practices.
    One of the core principles of AWS security is the <strong>Principle of Least Privilege</strong>.
  </p>

  <p>
    To read more on IAM best practices, see:
    <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html"
       target="_blank"
       rel="noopener noreferrer">
      IAM Best Practices
    </a>
  </p>

  <h2>Get an Account Summary</h2>
  <p>
    A great first step is generating a summary report of your account using the AWS CLI:
  </p>

  <pre><code>aws iam get-account-summary</code></pre>

  <p>Example output:</p>

  <pre><code>{
  "SummaryMap": {
    "Users": 27,
    "Groups": 7,
    "Roles": 3,
    "MFADevices": 3,
    "MFADevicesInUse": 1,
    "AccountMFAEnabled": 1
  }
}</code></pre>

  <h2>Generate a Credential Report</h2>
  <p>
    For deeper insight, generate a credential report to review user-level details.
  </p>

  <pre><code>aws iam generate-credential-report</code></pre>

  <p>Download the report:</p>

  <pre><code>aws iam get-credential-report --output text --query Content | base64 -D >> report.txt</code></pre>

  <h2>What the Report Contains</h2>

  <pre><code>user
arn
user_creation_time
password_enabled
password_last_used
password_last_changed
password_next_rotation
mfa_active
access_key_1_active
access_key_1_last_rotated
access_key_2_active</code></pre>

  <p>
    This report allows you to determine whether users are still active employees and
    whether credentials need to be rotated or removed.
  </p>

  <p>
    Audits should be performed regularly, especially after organizational changes such
    as employee departures or suspected unauthorized access.
  </p>

  <p>
    You can also automate IAM audits using AWS Lambda on a scheduled basis to ensure
    ongoing compliance with security best practices.
  </p>

  <!-- Author Badge -->
  <div class="author-badge">
    <img src="/images/avatar.png" alt="Wendy Segura">
    <p><strong>Wendy Segura</strong></p>
    <p>Security Engineer 路 Writer 路 Cybersecurity</p>
  </div>

</div>

</body>
</html>
